<!DOCTYPE html>
<html>
<head>
    <title>Bookmap: voronoi diagram with Hilbert coords</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="controls.css" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
    <script src="hilbert.js"></script>
    <script src="bookmap.js"></script>
    <script src="Lists/atomic_static.js"></script>
    <script src="lists.js"></script>
    <script src="controls.js"></script>
</head>
<body>

<div id="chart">
</div>

<div id="lists">
  <form name="controls" id="listform">
  </form>
</div>
<div id="status"></div>

<div id="controls">
</div>

<script type="text/javascript">

hilbert_init(14, 600);

var ccb = setup_lists(d3.select("#listform"), bookmap_dynamic, true);

console.log("ccb = " + ccb);

var csvg = d3.select("#controls").append("svg")
    .attr("width", 400)
    .attr("height", 550);

function colour_ctrls(cb, i, target) {
    make_select(csvg, i, target, [ "spectrum", "monotone" ], function(v) {
        console.log("mode");
        cb(target, 'mode', v) } );
    make_slider(csvg, i+1, "Hue", [ 0, 360 ], style[target].hue, function(d) { console.log("hue"); cb(target, 'hue', d) });
    make_slider(csvg, i+2, "Sat", [ 0, 1 ], style[target].saturation, function(d) { ccb(target, 'saturation', d) });
    make_slider(csvg, i+3, "Lum", [ 0, 1 ], style[target].luminance, function(d) { ccb(target, 'luminance', d) });
    make_slider(csvg, i+4, "Blur", [ 0, 20 ], 0, function(d) { ccb(target, 'blur', d);});
}

colour_ctrls(ccb, 0, 'cell');
colour_ctrls(ccb, 5, 'node');

make_slider(csvg, 10, "Opacity", [ 0, 1.0 ], .8, function(v) { ccb('node', 'opacity', v);});
make_select(csvg, 11, "Rmode", ["constant", "title"], function(v) { ccb('node', 'rmode', v); });
make_slider(csvg, 12, "Radius", [ 1, 50 ], 5, function(v) { ccb('node', 'radius', v);});

</script>
</body>
</html>
